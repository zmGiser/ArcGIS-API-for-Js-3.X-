// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.22/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/playerSupports/_ZoomSupport","dojo/_base/declare dojo/aspect dojo/on dojo/dom-class dojo/when ../PlayerSelect ../PlayerZoomBehaviors esri/dijit/geoenrichment/utils/DomUtil dojo/i18n!../../../../nls/jsapi".split(" "),function(g,h,p,q,k,l,m,e,d){function n(a){var b=[];f.forEach(function(c){"number"===typeof c.value&&b.push({value:c.value,score:a<c.value?a/c.value:c.value/a})});b.sort(function(a,b){return b.score-a.score});return b[0].value}d=d.geoenrichment.dijit.ReportPlayer.ReportPlayer;
var f=[{value:"fitPage",label:d.fitPage},{value:"fitPageWidth",label:d.fitPageWidth},{value:150,label:"150%"},{value:100,label:"100%"},{value:80,label:"80%"},{value:75,label:"75%"},{value:60,label:"60%"},{value:50,label:"50%"}];return g(null,{_isFitPageFlag:!1,zoomSelect:null,postCreate:function(){this.inherited(arguments);this._initZoomControls();e.hide(this.zoomSelectDiv)},_initZoomControls:function(){var a=this;this.zoomSelect=(new this._getZoomSelectClass)({onUserChange:function(b){"fitPage"===
b?a.getCurrentReportContainer().zoomToFitPage():"fitPageWidth"===b?a.getCurrentReportContainer().zoomToFitPageWidth():a.getCurrentReportContainer().setZoomPercent(b)}}).placeAt(this.zoomSelectDiv);this.own(this.zoomSelect);this.zoomSelect.update(f,100)},_getZoomSelectClass:function(){return l},setBestZoom:function(){this.__callZoomMethod("setBestZoom")},zoomToFitPage:function(){this.__callZoomMethod("zoomToFitPage")},resetZoom:function(){this.__callZoomMethod("resetZoom")},_applyDefaultZoomBehavior:function(a){a&&
this.defaultZoomBehavior==m.FIT_PAGE?this.zoomToFitPage():this.resetZoom()},__callZoomMethod:function(a){if(!this.isSlidesView){var b=this.getCurrentReportContainer();b&&b[a]&&b[a]()}},_reportContainerZoomChangedHandle:null,resize:function(){var a=this;return k(this.inherited(arguments),function(){var b=a.getCurrentReportContainer();a._reportContainerZoomChangedHandle&&a._reportContainerZoomChangedHandle.remove();a._reportContainerZoomChangedHandle=b&&h.after(b,"onZoomChanged",a._onZoomChanged.bind(a));
b=!a.isSlidesView&&b&&!!b.zoomIn;e[b?"show":"hide"](a.zoomSelectDiv);a._applyDefaultZoomBehavior(b)})},_onZoomChanged:function(){var a=this.getCurrentReportContainer();a&&a.getZoomInfo&&(a=this.getCurrentReportContainer().getZoomInfo(),a=a.isFitPageScale?"fitPage":a.isFitPageWidthScale?"fitPageWidth":n(100*a.scale),a!=this.zoomSelect.get("value")&&this.zoomSelect.update(void 0,a))}})});