// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.22/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/utils/PopupUtil","dojo/_base/lang dojo/aspect esri/dijit/geoenrichment/utils/onClickTouch dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/when dojo/sniff dijit/popup dijit/place ./MouseUtil dojo/domReady!".split(" "),function(A,D,t,B,d,n,u,v,E,k,p,w){var h={makePopup:function(a,C,m,c){function p(a){if(c.overlay&&a._popupWrapper){var b=d.create("div",{"class":c.overlay.overlayClass});if(c.overlay.overlayParent)d.place(b,c.overlay.overlayParent);
else{d.place(b,g,"before");var e=u.get(a._popupWrapper,"zIndex");u.set(b,"zIndex",e)}a.__popupOverlay=b}}function x(a){a.__popupOverlay&&(d.destroy(a.__popupOverlay),a.__popupOverlay=null)}function f(e){e&&c.stopEventPropagation&&e.stopPropagation();v(b||("function"==typeof a?a():a),function(a){b=a;b.domNode&&(b.__openPopupWidgetFunc=f,q||(q=!0,g=k.moveOffScreen(b),v(c.onPreShow&&c.onPreShow(),function(){var a=c.orient||["below"];if(g&&!1!==c.allowAutoOrientation){var e=-1!==a.indexOf("below"),f=
n.position(m),h=n.position(g);e&&f.y+f.h+h.h>document.body.clientHeight&&(e=!e);a=a.map(function(a){return"below"!=a||e?a:"above"})}var d;c.noOverflow&&(b.baseClass="esriGENoOverflow "+b.baseClass);k.open({parent:C,popup:b,around:m,orient:a,onClose:function(){q=!1;d&&d.remove();b.__popupWidgetOpenFlag=!1;x(b);c.onClose&&c.onClose()}});c.noOverflow&&(b.baseClass=b.baseClass.replace("esriGENoOverflow ",""));g&&c.wrapperClass&&B.add(g,c.wrapperClass);b.__popupInfo=A.mixin({},k.getTopPopup());b.__popupInfo.orient=
a;b.__popupInfo.around=m;x(b);p(b);c.onShow&&c.onShow();b.__popupWidgetOpenFlag=!0;l&&(b.own&&b.own(l),l=null);!1!==c.closeOnClickOutside&&setTimeout(function(){d=t(document.body,y,function(a){w.fixTouchEvent(a);w.isMouseOver(g)||c.isMouseOver&&c.isMouseOver()||b.isMouseOver&&b.isMouseOver()||(b.domNode&&k.close(b),d.remove())})},0)})))})}if(a){c=c||{};var y=c.openMouseEvent?c.openMouseEvent:"click, mouseup",b="function"!==typeof a?a:null;if(b)var g=k.moveOffScreen(b);var q=!1;b&&(b.__openPopupWidgetFunc=
f);var l;if(!1!==c.openOnMouseEvent){var z=f;if(c.toggleOnClick)var r,z=function(a){r=r||a.type;b?r==a.type&&h.toggle(b):f()};l=t(c.onClickComponent||m,y,z)}c.openPopup&&f();return{remove:function(){l&&l.remove()}}}},open:function(a){a&&!a.__popupWidgetOpenFlag&&a.__openPopupWidgetFunc&&a.__openPopupWidgetFunc()},close:function(a){a&&k.close(a)},isOpen:function(a){return!(!a||!a.__popupWidgetOpenFlag)},toggle:function(a){h.isOpen(a)?h.close(a):h.open(a)},refresh:function(a){if(a){a=a.__popupInfo;
var d=n.isBodyLtr();p.around(a.wrapper,a.around,a.orient,d)}},getWrapper:function(a){return a&&a._popupWrapper}};return h});