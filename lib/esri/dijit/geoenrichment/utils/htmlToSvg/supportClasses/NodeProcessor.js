// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.22/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/utils/htmlToSvg/supportClasses/NodeProcessor","dojo/Deferred dojo/when dojo/promise/all ./drawing/SVGDrawer ./DomProcessor ./Clipper ./VisualsCollector".split(" "),function(y,l,D,g,z,q,A){return{processNode:function(e,h){function r(b,c,e,t,k){function f(a){a&&(Array.isArray(a)?a.forEach(function(a){f(a)}):(m.push({text:a,stackIndex:++k}),d++))}var d=0;if("#comment"==b.nodeName)return d;var a=A.getNodeVisuals(b,t);if(!a)return d;a.style.isRelAbs&&(k=B+=1E5);a.parentVs=
t;if("svg"==b.nodeName)return f(g.drawSVG(b,a,c)),d;if("IMG"==b.nodeName)return f(g.drawImage(b,a,c)),d;if(a.style.background.image&&"none"!=a.style.background.image){var u;a.style.borderRadius&&(u=q.addClipping(a,h.definitions));f(g.drawBackgroundImage(a,u||c))}f(g.drawRect(a,c));f(g.drawBorder(a,c));z.replaceTextWithSpans(b);var v;if(b.childNodes.length){var n=function(){function d(){"#text"==e.nodeName?(f(g.drawText(b,a,c,{encodeText:h.encodeText})),n()):l(r(e,c,p,a,k),function(a){k+=a;n()})}var e=
b.childNodes[C++];e?500<++w?(w=0,setTimeout(d,30)):d():x.resolve()},x=new y;v=x.promise;var p;"hidden"==a.style.overflow&&(p=h.clipFunc&&h.clipFunc(b),c=(e||h.useClipping||p)&&q.addClipping(a,h.definitions,c));var C=0;n()}return l(v,function(){return d})}var w=0,m=[],B=0;return l(r(e,null,null,null,0),function(){m.sort(function(b,c){return b.stackIndex-c.stackIndex});return m})}}});