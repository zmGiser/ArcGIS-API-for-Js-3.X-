// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.22/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/playerSupports/_CommandSupport","dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/when dojo/on dojo/dom-class dojo/dom-construct esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/TooltipUtil esri/dijit/geoenrichment/ReportPlayer/dataProviders/commands/supportClasses/PlayerCommands dojo/i18n!../../../../nls/jsapi".split(" "),function(l,m,k,f,n,p,h,r,q,e,g){g=g.geoenrichment.dijit.ReportPlayer.ReportPlayer;return l(null,{_lastNonPrintCommandId:null,
postCreate:function(){this.inherited(arguments);this._initCommands()},_initCommands:function(){var a=this;f(this.dataProvider.getCommands&&this.dataProvider.getCommands(),function(b){a._createCommandButtons(b);b&&b.length||(h.destroy(a.commandButtonsContainer),a.commandButtonsContainer=null)})},_createCommandButtons:function(a){function b(a){var b=new k;c.onCommandSettingsShown(b.promise);f(c._getPrintableContainer({commandId:a,showDialog:!0}),function(a){if(a){var b=a.getSelectedCommandId();b&&b!=
e.PRINT&&(c._lastNonPrintCommandId=b);c._executeCommand(b,{printableContainer:a})}else c.onCommandCanceled()}).always(b.resolve)}var c=this;if(a&&a.length){var d;a=a.filter(function(a){return a.id==e.PRINT?(d=a,!1):!0});a.length&&this._createCommandButton(a[0],function(){b(c._lastNonPrintCommandId||a[0].id)});d&&this._createCommandButton(d,function(){b(d.id)})}},_createCommandButton:function(a,b){var c=h.create("div",{"class":"reportPlayer_commandButtonContainer dijitInline"},this.commandButtonsContainer),
c=h.create("div",{"class":"reportPlayer_commandButton"},c);p.add(c,a.id==e.PRINT?"playerPrintButton":"playerExportButton");q.setTooltipToNode(c,a.id==e.PRINT?g.printInfographic:g.exportInfographic);n(c,"click",b);return c},_executeCommand:function(a,b){var c=this;a!==e.PDF&&a!==e.DYNAMIC_HTML||!this._viewModel.dynamicReportInfo.fieldData.runReportTaskID||(b.creditsTaskID=this._viewModel.dynamicReportInfo.fieldData.runReportTaskID);var d=new k;setTimeout(function(){f(c.dataProvider.executeCommand&&
c.dataProvider.executeCommand(a,c,b),d.resolve,d.reject)});this.onCommandStart(d.promise,a);this._showWaiting();d.promise.always(function(){c._removeWaiting();c.onCommandEnd()});return d.promise},executeCommand:function(a,b){var c=this;return f(this._getPrintableContainer({commandId:a,showDialog:!1}),function(d){return c._executeCommand(a,m.mixin({printableContainer:d},b))})},onCommandSettingsShown:function(a){},onCommandCanceled:function(){},onCommandStart:function(a,b){},onCommandEnd:function(){}})});