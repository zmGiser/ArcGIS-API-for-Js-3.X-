// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.22/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/infographics/infographicUtils/InfographicLayoutResizer",["dojo/_base/lang","../../supportClasses/TableUtil"],function(h,k){function l(a){var d=h.mixin({},m);a.style.minWidth&&(d.minW=a.style.minWidth);a.style.minHeight&&(d.minH=a.style.minHeight);return d}var g={},m={minW:320,maxW:1E6,minH:175,maxH:250};g.getContentDim=function(a){var d=k.getTableHeight(a.header)+(a.header.style.spaceBefore||0),b={w:a.style.width,h:a.style.height-d,top:d},e=l(a),
f=h.mixin({},b);f.w=Math.max(e.minW,Math.min(e.maxW,f.w));f.h=Math.max(e.minH,Math.min(e.maxH,f.h));f.left=Math.max(0,(b.w-f.w)/2);f.top=Math.max(0,(b.h-f.h)/2);b.prettyfiedBox=f;if(a.variableTables){var c={left:1E6,top:1E6,w:0,h:0};a.variableTables.forEach(function(a){c.left=Math.min(c.left,a.style.left);c.top=Math.min(c.top,a.style.top);c.w=Math.max(c.w,a.style.left+a.style.width);c.h=Math.max(c.h,a.style.top+a.style.height)});c.w-=c.left;c.h-=c.top;c.top-=d;b.innerBox=c}return b};g.resizeLayout=
function(a,d){a.style.width=d.w;a.style.height=d.h;a.header.style.width=a.style.width;a.header.data.columns[0].style.width="100%";if(a.variableTables){var b=g.getContentDim(a),e=b.top,f=b.prettyfiedBox.w/b.innerBox.w,c=b.prettyfiedBox.h/b.innerBox.h;a.variableTables.forEach(function(a){a.style.left*=f;a.style.top=(a.style.top-e)*c+e;g.resizeVariableTable(a,a.style.width*f,a.style.height*c,{preserveContentSizes:!0})});var b=g.getContentDim(a),n=b.prettyfiedBox.left-b.innerBox.left,p=b.prettyfiedBox.top-
b.innerBox.top;a.variableTables.forEach(function(a){a.style.left+=n;a.style.top+=p})}};g.resizeVariableTable=function(a,d,b,e){var f=e&&e.preserveContentSizes;d=d||a.style.width;b=b||a.style.height;var c=d/a.style.width||1,g=b/a.style.height||1;a.style.width=d;a.style.height=b;["shape","image","variable","description"].forEach(function(b){if(a[b])if(b=a[b].style,f){var d=b.left+b.width/2,e=b.top+b.height/2,d=d*c,e=e*g;b.left=d-b.width/2;b.top=e-b.height/2}else b.left*=c,b.width*=c,b.top*=g,b.height*=
g})};return g});