// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.22/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/MetadataParser",["esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(c){return{parseMetadataXML:function(g,h,k){k.log&&k.log(g.data);var d=c.parseXml(g.data);d&&d.attributes&&(function(){c.queryJson(d,"Maps").forEach(function(e){c.queryJson(e,"Map").forEach(function(b){var a=c.queryJson(b,"Layer").filter(function(a){return!!a.attributes.PortalItemId}),f;1<a.length&&(f=a.shift());a=a.shift();h.metadata.mapImageInfosHash[e.attributes.Name+
"."+b.attributes.Name]={defaultBasemapId:f&&f.attributes.PortalItemId,webMapId:a&&a.attributes.PortalItemId,mapScale:Number(b.attributes.Scale)||null}})})}(),function(){c.queryJson(d,"DataCollections").forEach(function(e){var b=c.queryJson(e,"ComparisonLevel");if(b.length){var a=c.queryJson(e,"Fields")[0],f=[],d=[];c.queryJson(a,"Field").forEach(function(a){f.push(a.attributes.MapTo);d.push({id:a.attributes.MapTo.substr(a.attributes.MapTo.lastIndexOf(".")+1),fullName:a.attributes.MapTo,alias:a.attributes.Alias,
fieldName:a.attributes.Name})});b=b.map(function(a){return a.attributes.Name});a=b.pop();h.metadata.infographicCalculatorsHash[e.attributes.Name]={variables:f,levels:b,highestLevel:a,variableObjects:d}}})}())}}});