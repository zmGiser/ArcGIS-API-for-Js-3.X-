// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.22/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/conversion/PortalToEditorConverter","dojo/_base/declare dojo/promise/all dojo/when ./portalToEditorUtils/LayoutParser ./portalToEditorUtils/MetadataParser ./portalToEditorUtils/ImageCollector ./portalToEditorUtils/parsers/Parsers ./portalToEditorUtils/DummyVariableProvider ../supportClasses/DefaultStyles ../supportClasses/images/ImageDataHolder ../themes/conversion/CssParser".split(" "),function(C,D,e,u,v,k,p,w,x,q,y){return{provideEditorJson:function(c,
b){function z(){function A(){return e(v.parseMetadataXML(c,d,b),function(){return b.processMetadataFile&&b.processMetadataFile(c,d)})}var f,c,l;g&&g.files&&g.files.forEach(function(a){"report.xml"==a.name?f=f||a:"graphicReport.xml"==a.name?f=a:"metadata.xml"==a.name?c=a:"theme.css.txt"==a.name?l=a:"graphicLayout.txt"==a.name&&(m=JSON.parse(a.data))});var k=b.log||function(a){};if(!m&&(l&&(d.theme=y.fromCssText(l.data)),f))return e(!c||A(),function(){return u.parseReportXML({isGraphicReport:r,parsers:p,
file:f,templateJson:d,variableProvider:t,tableDefaultStyles:B,processFileName:n,putImageData:function(a,b){a=n(a);q.putImageData(a,b||h[a])},log:k,queryMetaDataFunc:function(a){return b.queryMetaDataFunc?b.queryMetaDataFunc(a,d):t.statefulNameToCalculator("n/DC."+a)}})})}b=b||{};var r=c.isGraphicReport,t=b.variableProvider||new w,B=b.tableDefaultStyles||new x,d={thumbnailUrl:c.portalJson.thumbnailUrl,mainCalculatorName:null,documentOptions:{},metadata:{calculatorsHash:{},scriptsHash:{},mapImageInfosHash:{},
infographicCalculatorsHash:{}},missingDataInfo:{missingVariables:[]}};r?d.sectionsTables=[]:d.sections=[];var g=c.portalJson,h={},m,n=function(b){return b?b.toLowerCase():""};return e(p.initialize(),function(){return e(k.collectImageResources(g,h,n),function(){for(var b in h)q.putImageData(b,h[b]);return e(z(),function(){delete d.metadata;c.templateJson=m||d})})})}}});